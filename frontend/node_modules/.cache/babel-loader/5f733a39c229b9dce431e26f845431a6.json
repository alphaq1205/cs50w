{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/abhishek/projects/personal/harward_projects/har_test/two/iotDashboard2/frontend/src/component/main/homepage.js\";\nimport React from \"react\";\nimport AdminLayout from \"./AdminLayout\";\nimport { Link } from \"react-router-dom\";\nimport Header from \"../common/header\";\nimport { Table, Spinner } from \"react-bootstrap\";\nimport Button from \"react-bootstrap/Button\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport { withRouter } from \"react-router-dom\";\n\nclass Homepage extends React.Component {\n  constructor() {\n    super();\n\n    this.componentWillMount = () => {\n      let email = localStorage.getItem('email');\n      let key = localStorage.getItem('key');\n\n      if (key) {\n        this.setState({\n          username: email\n        });\n      } else {\n        alert('You are not logged in');\n        this.props.history.push(\"/\");\n      }\n    };\n\n    this.componentDidMount = () => {\n      this.getDeviceData();\n    };\n\n    this.getDeviceData = () => {\n      let url = \"http://127.0.0.1:8000/devices/\";\n      fetch(url, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\"\n        }\n      }).then(responseJson => responseJson.json()).then(response => {\n        this.setState({\n          data: response\n        });\n      }).catch(error => {\n        console.log(error);\n        alert(\"Something went wrong please try again\");\n      });\n    };\n\n    this.deleteDeviceData = id => {\n      this.setState({\n        loading: true\n      });\n      let url = 'http://127.0.0.1:8000/devices/' + id + '/';\n      fetch(url, {\n        method: 'DELETE'\n      }).then(res => res.json()).then(res => {\n        alert('Data deleted successfully');\n        window.location.reload();\n        this.setState({\n          loading: false\n        });\n      }).catch(error => {\n        alert('Something went wrong please try again');\n        window.location.reload();\n        this.setState({\n          loading: false\n        });\n      });\n    };\n\n    this.notEnabled = () => {\n      alert('Please enable the device');\n    };\n\n    this.state = {\n      data: [],\n      token: \"\",\n      loading: false,\n      stillLogin: false,\n      username: '',\n      loading: '',\n      email: ''\n    };\n  }\n\n  render() {\n    let {\n      data,\n      username\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(AdminLayout, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: {\n            span: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Dashboards\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            striped: true,\n            bordered: true,\n            hover: true,\n            size: \"sm\",\n            responsive: \"sm\",\n            id: \"table-to-xls\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"ID\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  className: \"text-center\",\n                  children: \"Device Detail\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  className: \"text-center\",\n                  children: \"Device Data\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  className: \"text-center\",\n                  children: \"Is Enable\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  className: \"text-center\",\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  className: \"text-center\",\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: data.reverse().map(dta => {\n                console.log(dta.user);\n                console.log(username);\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: dta.id\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 120,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-center\",\n                    children: dta.enable ? /*#__PURE__*/_jsxDEV(Link, {\n                      className: \"btn btn-info btn-sm mr-1\",\n                      to: `DeviceDetail/${dta.id}`,\n                      children: \"Detail\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 123,\n                      columnNumber: 27\n                    }, this) : /*#__PURE__*/_jsxDEV(Link, {\n                      className: \"btn btn-info btn-sm mr-1\",\n                      onClick: this.notEnabled,\n                      children: \"Detail\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 126,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-center\",\n                    children: dta.enable ? /*#__PURE__*/_jsxDEV(Link, {\n                      className: \"btn btn-info btn-sm mr-1\",\n                      to: `singleDeviceData/${dta.id}`,\n                      children: \"Data\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 134,\n                      columnNumber: 27\n                    }, this) : /*#__PURE__*/_jsxDEV(Link, {\n                      className: \"btn btn-info btn-sm mr-1\",\n                      onClick: this.notEnabled,\n                      children: \"Data\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-center\",\n                    children: dta.enable == true ? /*#__PURE__*/_jsxDEV(Spinner, {\n                      animation: \"grow\",\n                      variant: \"success\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 142,\n                      columnNumber: 75\n                    }, this) : /*#__PURE__*/_jsxDEV(Spinner, {\n                      animation: \"grow\",\n                      variant: \"danger\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 142,\n                      columnNumber: 124\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-center\",\n                    className: \"text-center\",\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      className: \"btn btn-info btn-sm mr-1\",\n                      to: `editDevice/${dta.id}`,\n                      children: \"Edit\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 144,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-center\",\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      className: \"btn btn-info btn-sm mr-1\",\n                      onClick: () => this.deleteDeviceData(dta.id),\n                      children: [this.state.loading && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"spinner-border spinner-border-sm\",\n                        role: \"status\",\n                        \"aria-hidden\": \"true\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 151,\n                        columnNumber: 31\n                      }, this), this.state.loading && /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \" Processing... \"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 158,\n                        columnNumber: 31\n                      }, this), !this.state.loading && /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: \" Delete\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 160,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 149,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(Homepage);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/abhishek/projects/personal/harward_projects/har_test/two/iotDashboard2/frontend/src/component/main/homepage.js"],"names":["React","AdminLayout","Link","Header","Table","Spinner","Button","Row","Col","withRouter","Homepage","Component","constructor","componentWillMount","email","localStorage","getItem","key","setState","username","alert","props","history","push","componentDidMount","getDeviceData","url","fetch","headers","Accept","then","responseJson","json","response","data","catch","error","console","log","deleteDeviceData","id","loading","method","res","window","location","reload","notEnabled","state","token","stillLogin","render","span","reverse","map","dta","user","enable"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport AdminLayout from \"./AdminLayout\";\nimport { Link } from \"react-router-dom\";\nimport Header from \"../common/header\";\nimport { Table, Spinner } from \"react-bootstrap\";\nimport Button from \"react-bootstrap/Button\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport { withRouter } from \"react-router-dom\";\n\nclass Homepage extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      data: [],\n      token: \"\",\n      loading: false,\n      stillLogin: false,\n      username: '',\n      loading: '',\n      email:''\n    };\n  }\n\n  componentWillMount = () => {\n\n    let email = localStorage.getItem('email')\n    let key = localStorage.getItem('key')\n    if (key) {\n      this.setState({ username: email })\n    } else {\n      alert('You are not logged in')\n      this.props.history.push(\"/\")\n    }\n  }\n\n  componentDidMount = () => {\n    this.getDeviceData()\n  }\n\n  getDeviceData = () => {\n    let url = \"http://127.0.0.1:8000/devices/\"\n    fetch(url, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      }\n    })\n      .then((responseJson) => responseJson.json())\n      .then((response) => {\n        this.setState({ data: response })\n      })\n      .catch((error) => {\n        console.log(error)\n        alert(\"Something went wrong please try again\");\n      })\n  }\n\n  deleteDeviceData = (id) => {\n    this.setState({ loading: true })\n    let url = 'http://127.0.0.1:8000/devices/' + id + '/'\n    fetch(url, {\n      method: 'DELETE',\n    })\n      .then(res => res.json())\n      .then((res) => {\n        alert('Data deleted successfully')\n        window.location.reload()\n        this.setState({ loading: false });\n      })\n      .catch((error) => {\n        alert('Something went wrong please try again')\n        window.location.reload()\n        this.setState({ loading: false });\n      })\n  }\n\n  notEnabled = () => {\n    alert('Please enable the device')\n  }\n\n  render() {\n\n    let { data, username } = this.state\n    \n    return (\n      <AdminLayout>\n        <Row>\n          <Col md={{ span: 2 }}>\n            <h2>Dashboards</h2>\n\n          </Col>\n          <Col>\n            <Header />\n          </Col>\n        </Row>\n        <Row>\n          \n          <Col>\n            <Table striped bordered hover size=\"sm\" responsive=\"sm\" id=\"table-to-xls\">\n              <thead>\n                <tr>\n                  <th scope=\"col\">ID</th>\n                  <th scope=\"col\" className=\"text-center\">Device Detail</th>\n                  <th scope=\"col\" className=\"text-center\">Device Data</th>\n                  <th scope=\"col\" className=\"text-center\">Is Enable</th>\n                  <th scope=\"col\" className=\"text-center\">Edit</th>\n                  <th scope=\"col\" className=\"text-center\">Delete</th>\n                </tr>\n              </thead>\n              <tbody>\n                {\n\n                  data.reverse().map((dta) => {\n                    console.log(dta.user)\n                    console.log(username)\n                    \n                    return (\n                      <tr>\n                        <td>{dta.id}</td>\n                        <td className=\"text-center\">\n                        { dta.enable ?\n                          <Link className=\"btn btn-info btn-sm mr-1\" to={`DeviceDetail/${dta.id}`}>\n                          Detail\n                        </Link>:\n                        <Link className=\"btn btn-info btn-sm mr-1\" onClick={this.notEnabled}>\n                        Detail\n                      </Link>\n                  }\n                        \n                        </td>\n                        <td className=\"text-center\">\n                          { dta.enable ?\n                          <Link className=\"btn btn-info btn-sm mr-1\" to={`singleDeviceData/${dta.id}`}>\n                          Data\n                        </Link>:\n                        <Link className=\"btn btn-info btn-sm mr-1\" onClick={this.notEnabled}>\n                        Data\n                      </Link>\n                        }\n                        </td>\n                        <td className=\"text-center\">{dta.enable == true ? <Spinner animation=\"grow\" variant=\"success\" /> : <Spinner animation=\"grow\" variant=\"danger\" />}</td>\n                        <td className=\"text-center\" className=\"text-center\">\n                          <Link className=\"btn btn-info btn-sm mr-1\" to={`editDevice/${dta.id}`}>\n                            Edit\n                          </Link>\n                        </td>\n                        <td className=\"text-center\">\n                          <Link className=\"btn btn-info btn-sm mr-1\" onClick={() => this.deleteDeviceData(dta.id)}>\n                            {this.state.loading && (\n                              <span\n                                className=\"spinner-border spinner-border-sm\"\n                                role=\"status\"\n                                aria-hidden=\"true\"\n                              ></span>\n                            )}\n                            {this.state.loading && (\n                              <span> Processing... </span>\n                            )}\n                            {!this.state.loading && <span> Delete</span>}\n\n                          </Link>\n                        </td>\n                      </tr>\n                    )\n                  })\n                }\n              </tbody>\n            </Table>\n          </Col>\n        </Row>\n      </AdminLayout>\n    );\n  }\n}\n\nexport default withRouter(Homepage)"]},"metadata":{},"sourceType":"module"}